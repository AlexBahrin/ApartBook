#!/usr/bin/env python3
"""
Script to update all translation files with missing translations.
Run this script from the Apartament directory.
"""

import os
import re

# All translations for each language
TRANSLATIONS = {
    'ro': {
        "Guest count must be at least 1.": "Numărul de oaspeți trebuie să fie cel puțin 1.",
        "Pricing model: per apartment or per guest": "Model de preț: per apartament sau per oaspete",
        "Base price per night (for apartment) or price for 1 guest": "Preț de bază pe noapte (pentru apartament) sau preț pentru 1 oaspete",
        "Price per guest count: {1: 100, 2: 150, 3: 200, etc.}": "Preț per număr de oaspeți: {1: 100, 2: 150, 3: 200, etc.}",
        "Manual": "Manual",
        "iCal Import": "Import iCal",
        "UID from external iCal event": "UID din eveniment iCal extern",
        "The iCal feed this block came from": "Feed-ul iCal din care provine acest bloc",
        "e.g., Airbnb, Booking.com": "ex., Airbnb, Booking.com",
        "iCal feed URL": "URL feed iCal",
        "iCal Feed": "Feed iCal",
        "iCal Feeds": "Feed-uri iCal",
        "Some images failed to upload.": "Unele imagini nu au putut fi încărcate.",
        "Booking updated successfully! New total: %(price)s": "Rezervare actualizată cu succes! Total nou: %(price)s",
        "Error calculating price: %(error)s": "Eroare la calcularea prețului: %(error)s",
        "Cannot block past dates": "Nu se pot bloca date trecute",
        "Cannot block nights that have existing bookings": "Nu se pot bloca nopți care au rezervări existente",
        "Please provide both name and URL": "Vă rugăm să furnizați atât numele cât și URL-ul",
        "Feed not found": "Feed-ul nu a fost găsit",
        "All feeds synced!": "Toate feed-urile au fost sincronizate!",
        "Staff members should use the Staff Dashboard to manage conversations.": "Membrii personalului ar trebui să folosească Panoul de Administrare pentru a gestiona conversațiile.",
        "Hello %(username)s,": "Bună %(username)s,",
        "Thank you for registering with ApartBook!": "Vă mulțumim că v-ați înregistrat la ApartBook!",
        "This link will expire in 24 hours.": "Acest link va expira în 24 de ore.",
        "Best regards,": "Cu stimă,",
        "The ApartBook Team": "Echipa ApartBook",
        "This is an automated message. Please do not reply to this email.": "Acesta este un mesaj automat. Vă rugăm să nu răspundeți la acest email.",
        "Email Verified": "Email Verificat",
        "Email verified!": "Email verificat!",
        "Your account is now active and ready to use": "Contul dvs. este acum activ și gata de utilizare",
        "Verification Failed": "Verificare Eșuată",
        "Verification failed": "Verificare eșuată",
        "This verification link is invalid or has expired": "Acest link de verificare este invalid sau a expirat",
        "Register again": "Înregistrați-vă din nou",
        "Verify Your Email": "Verificați-vă Email-ul",
        "Verify your email": "Verificați-vă email-ul",
        "We've sent a verification link to your email address": "Am trimis un link de verificare la adresa dvs. de email",
        "What's next?": "Ce urmează?",
        "Check your email inbox": "Verificați căsuța de email",
        "Click the verification link": "Faceți clic pe linkul de verificare",
        "Didn't receive the email? Check your spam folder.": "Nu ați primit email-ul? Verificați folderul de spam.",
        "Welcome back": "Bine ați revenit",
        "Sign in to continue to your account": "Autentificați-vă pentru a continua la contul dvs.",
        "Username": "Nume de utilizator",
        "Enter your username": "Introduceți numele de utilizator",
        "Password": "Parolă",
        "Forgot password?": "Ați uitat parola?",
        "Enter your password": "Introduceți parola",
        "Reset Password": "Resetare Parolă",
        "Forgot your password?": "Ați uitat parola?",
        "No worries, we'll send you reset instructions": "Nu vă faceți griji, vă vom trimite instrucțiuni de resetare",
        "Enter your registered email": "Introduceți email-ul înregistrat",
        "Send Reset Link": "Trimite Link de Resetare",
        "Password Reset Complete": "Resetare Parolă Completă",
        "Password reset complete": "Resetare parolă completă",
        "Sign in with new password": "Autentificați-vă cu noua parolă",
        "Set New Password": "Setare Parolă Nouă",
        "Set new password": "Setare parolă nouă",
        "Your new password must be different from previous passwords": "Noua parolă trebuie să fie diferită de parolele anterioare",
        "New password": "Parolă nouă",
        "Enter new password": "Introduceți parola nouă",
        "Repeat new password": "Repetați parola nouă",
        "Invalid or expired link": "Link invalid sau expirat",
        "This password reset link has expired or is invalid.": "Acest link de resetare a parolei a expirat sau este invalid.",
        "Check Your Email": "Verificați Email-ul",
        "Check your email": "Verificați email-ul",
        "We've sent password reset instructions to your email": "Am trimis instrucțiuni de resetare a parolei la email-ul dvs.",
        "Didn't receive the email? Check your spam folder or": "Nu ați primit email-ul? Verificați folderul spam sau",
        "try again": "încercați din nou",
        "Create your account": "Creați-vă contul",
        "Choose a username": "Alegeți un nume de utilizator",
        "your@email.com": "email@exemplu.ro",
        "First name": "Prenume",
        "John": "Ion",
        "Last name": "Nume",
        "Doe": "Popescu",
        "Create a strong password": "Creați o parolă puternică",
        "At least 8 characters with letters and numbers": "Cel puțin 8 caractere cu litere și cifre",
        "Repeat your password": "Repetați parola",
        "By signing up, you agree to our": "Prin înregistrare, sunteți de acord cu",
        "Terms of Service": "Termenii și Condițiile",
        "and": "și",
        "Privacy Policy": "Politica de Confidențialitate",
        "Booking Created": "Rezervare Creată",
        "Price varies by guests": "Prețul variază în funcție de oaspeți",
        "Staff cannot create bookings": "Personalul nu poate crea rezervări",
        "Select date": "Selectați data",
        "Both check-in and check-out dates are required": "Sunt necesare atât data de check-in cât și de check-out",
        "to": "până la",
        "Please correct the errors below:": "Vă rugăm să corectați erorile de mai jos:",
        "Fixed price per night regardless of guest count": "Preț fix pe noapte indiferent de numărul de oaspeți",
        "Price per Night by Guest Count": "Preț pe Noapte în Funcție de Numărul de Oaspeți",
        "Set the capacity first to configure per-guest pricing": "Setați mai întâi capacitatea pentru a configura prețul per oaspete",
        "Please set the maximum guest capacity first": "Vă rugăm să setați mai întâi capacitatea maximă de oaspeți",
        "Upload Images": "Încărcare Imagini",
        "Drop images here or click to browse": "Trageți imaginile aici sau faceți clic pentru a naviga",
        "You can upload multiple images at once": "Puteți încărca mai multe imagini deodată",
        "Current Images": "Imagini Curente",
        "Drag to reorder - First image is the main photo": "Trageți pentru a reordona - Prima imagine este fotografia principală",
        "Main Photo": "Fotografie Principală",
        "Delete this image?": "Ștergeți această imagine?",
        "unread message": "mesaj necitit",
        "Calendar": "Calendar",
        "iCal Sync": "Sincronizare iCal",
        "Click on any date to block it. Click on a blocked date to unblock it.": "Faceți clic pe orice dată pentru a o bloca. Faceți clic pe o dată blocată pentru a o debloca.",
        "Block Date Range": "Blocare Interval de Date",
        "Start Date": "Data de Început",
        "Unblock Date": "Deblocare Dată",
        "Unblock": "Deblochează",
        "Base price": "Preț de bază",
        "Block this date?": "Blocați această dată?",
        "Error blocking date": "Eroare la blocarea datei",
        "Click to unblock": "Faceți clic pentru a debloca",
        "Error blocking dates": "Eroare la blocarea datelor",
        "Error unblocking date": "Eroare la deblocarea datei",
        "Calendar Overview": "Vedere de Ansamblu Calendar",
        "Click on an apartment to view its detailed calendar": "Faceți clic pe un apartament pentru a vedea calendarul detaliat",
        "Quick Stats": "Statistici Rapide",
        "Export Calendar": "Export Calendar",
        "Your iCal URL": "URL-ul dvs. iCal",
        "Copy": "Copiază",
        "This URL will always show the latest bookings and blocked dates.": "Acest URL va afișa întotdeauna cele mai recente rezervări și date blocate.",
        "Download .ics file": "Descarcă fișier .ics",
        "Import Calendars": "Import Calendare",
        "Name (e.g., Airbnb)": "Nume (ex., Airbnb)",
        "iCal URL": "URL iCal",
        "Sync All Now": "Sincronizează Tot Acum",
        "Connected Calendars": "Calendare Conectate",
        "Name": "Nume",
        "URL": "URL",
        "Last Synced": "Ultima Sincronizare",
        "Inactive": "Inactiv",
        "OK": "OK",
        "Error": "Eroare",
        "Never synced": "Niciodată sincronizat",
        "Sync now": "Sincronizează acum",
        "Delete": "Șterge",
        "No external calendars connected yet.": "Încă nu există calendare externe conectate.",
        "Copied!": "Copiat!",
        "Delete this feed and all imported blocked dates?": "Ștergeți acest feed și toate datele blocate importate?",
        "Price will be recalculated automatically based on dates, guests, and pricing rules.": "Prețul va fi recalculat automat în funcție de date, oaspeți și regulile de preț.",
        "Maximum number of guests": "Numărul maxim de oaspeți",
        "List of amenities": "Lista de facilități",
        "Availabilities": "Disponibilități",
        "Discount": "Reducere",
        "Per Apartment": "Per Apartament",
        "Per Guest": "Per Oaspete",
        "Guests count exceeds apartment capacity (%(capacity)s).": "Numărul de oaspeți depășește capacitatea apartamentului (%(capacity)s).",
        "Start date must be before end date": "Data de început trebuie să fie înainte de data de sfârșit",
        "Date unblocked successfully": "Dată deblocată cu succes",
        "iCal feed deleted!": "Feed iCal șters!",
        "Message sent!": "Mesaj trimis!",
        "Back to home": "Înapoi acasă",
        "Sign in to your account": "Autentificați-vă în contul dvs.",
        "Start booking amazing apartments!": "Începeți să rezervați apartamente uimitoare!",
        "Sign In": "Autentificare",
        "Create one": "Creează unul",
        "Email address": "Adresa de email",
        "Your password has been successfully changed": "Parola dvs. a fost schimbată cu succes",
        "Confirm new password": "Confirmați parola nouă",
        "Request a new link": "Solicită un link nou",
        "Create Account": "Creează Cont",
        "Join us to book amazing apartments": "Alăturați-vă nouă pentru a rezerva apartamente uimitoare",
        "Confirm password": "Confirmați parola",
        "Already have an account?": "Aveți deja un cont?",
        "Sign in": "Autentificare",
        "Booking": "Rezervare",
        "Booking Details": "Detalii Rezervare",
        "Cancelled": "Anulat",
        "Duration": "Durată",
        "Total Price": "Preț Total",
        "Cancel Booking": "Anulare Rezervare",
        "Booking Confirmed!": "Rezervare Confirmată!",
        "guests max": "oaspeți maxim",
        "View Apartment": "Vezi Apartament",
        "Message Owner": "Mesaj Proprietar",
        "Actions": "Acțiuni",
        "No bookings yet": "Încă nu există rezervări",
        "Conversation": "Conversație",
        "All Messages": "Toate Mesajele",
        "My Messages": "Mesajele Mele",
        "Back to Bookings": "Înapoi la Rezervări",
        "No messages yet": "Încă nu există mesaje",
        "View My Bookings": "Vezi Rezervările Mele",
        "max": "max",
        "Notes": "Note",
        "optional": "opțional",
        "guest": "oaspete",
        "Edit Apartment": "Editare Apartament",
        "New Apartment": "Apartament Nou",
        "Pricing Configuration": "Configurare Prețuri",
        "Pricing Model": "Model de Prețuri",
        "Price per Night": "Preț pe Noapte",
        "Price per night": "Preț pe noapte",
        "Manage Images": "Gestionare Imagini",
        "Images": "Imagini",
        "No images uploaded yet": "Încă nu s-au încărcat imagini",
        "Manage Apartments": "Gestionare Apartamente",
        "Add Apartment": "Adaugă Apartament",
        "Image": "Imagine",
        "Bookings": "Rezervări",
        "Guest": "Oaspete",
        "Edit Booking": "Editare Rezervare",
        "Number of Guests": "Număr de Oaspeți",
        "Max capacity:": "Capacitate maximă:",
        "Update Booking": "Actualizare Rezervare",
        "Update Status": "Actualizare Status",
        "Quick Actions": "Acțiuni Rapide",
        "View Apartment Calendar": "Vezi Calendarul Apartamentului",
        "Manage Bookings": "Gestionare Rezervări",
        "Booking Calendar": "Calendar Rezervări",
        "Block Dates": "Blocare Date",
        "End Date": "Data de Sfârșit",
        "Note (optional)": "Notă (opțional)",
        "Cancel": "Anulează",
        "Manage Availability": "Gestionare Disponibilitate",
        "Pricing Rules": "Reguli de Prețuri",
        "Apartment Info": "Informații Apartament",
        "All Bookings": "Toate Rezervările",
        "Select Apartment": "Selectare Apartament",
        "All Apartments": "Toate Apartamentele",
        "Total Bookings": "Total Rezervări",
        "Add": "Adaugă",
        "Please click the link below to verify your email address and activate your account:": "Vă rugăm să faceți clic pe linkul de mai jos pentru a vă verifica adresa de email și a vă activa contul:",
        "If you didn't create an account with ApartBook, please ignore this email.": "Dacă nu ați creat un cont la ApartBook, vă rugăm să ignorați acest email.",
        "The link may have already been used or has expired. Please try registering again or contact support if you need assistance.": "Linkul poate fi deja utilizat sau a expirat. Vă rugăm să încercați să vă înregistrați din nou sau să contactați suportul dacă aveți nevoie de asistență.",
        "Back to sign in": "Înapoi la autentificare",
        "Staff members cannot create bookings. Please use a regular user account.": "Membrii personalului nu pot crea rezervări. Vă rugăm să utilizați un cont de utilizator obișnuit.",
        "Staff members cannot access user bookings. Please use the Staff Dashboard.": "Membrii personalului nu pot accesa rezervările utilizatorilor. Vă rugăm să utilizați Panoul de Administrare.",
        "Staff members cannot cancel bookings through this interface. Please use the Staff Dashboard.": "Membrii personalului nu pot anula rezervări prin această interfață. Vă rugăm să utilizați Panoul de Administrare.",
        "Your booking request is being reviewed by the owner. You'll receive a notification once it's confirmed.": "Cererea dvs. de rezervare este în curs de examinare de către proprietar. Veți primi o notificare odată ce este confirmată.",
        "Use this URL to share your calendar with other platforms like Airbnb, Booking.com, or any service that supports iCal.": "Utilizați acest URL pentru a partaja calendarul dvs. cu alte platforme precum Airbnb, Booking.com sau orice serviciu care acceptă iCal.",
        "Add iCal URLs from other platforms to automatically sync their bookings. Calendars are synced every minute.": "Adăugați URL-uri iCal de pe alte platforme pentru a sincroniza automat rezervările lor. Calendarele sunt sincronizate în fiecare minut.",
        "Add iCal URLs from Airbnb, Booking.com, or other platforms to sync their bookings automatically.": "Adăugați URL-uri iCal de pe Airbnb, Booking.com sau alte platforme pentru a sincroniza automat rezervările lor.",
        "Are you sure you want to unblock this date?": "Sigur doriți să deblocați această dată?",
    },
    'ru': {
        "Guest count must be at least 1.": "Количество гостей должно быть не менее 1.",
        "Manual": "Ручной",
        "iCal Import": "Импорт iCal",
        "iCal Feed": "Лента iCal",
        "iCal Feeds": "Ленты iCal",
        "Calendar": "Календарь",
        "iCal Sync": "Синхронизация iCal",
        "Welcome back": "С возвращением",
        "Username": "Имя пользователя",
        "Password": "Пароль",
        "Forgot password?": "Забыли пароль?",
        "Reset Password": "Сброс пароля",
        "Email Verified": "Email подтверждён",
        "Email verified!": "Email подтверждён!",
        "Verification Failed": "Ошибка проверки",
        "Verify Your Email": "Подтвердите ваш Email",
        "First name": "Имя",
        "Last name": "Фамилия",
        "Create a strong password": "Создайте надёжный пароль",
        "Terms of Service": "Условия использования",
        "Privacy Policy": "Политика конфиденциальности",
        "and": "и",
        "Booking Created": "Бронирование создано",
        "Select date": "Выберите дату",
        "to": "до",
        "Upload Images": "Загрузить изображения",
        "Current Images": "Текущие изображения",
        "Main Photo": "Главное фото",
        "Calendar Overview": "Обзор календаря",
        "Quick Stats": "Быстрая статистика",
        "Export Calendar": "Экспорт календаря",
        "Import Calendars": "Импорт календарей",
        "Copy": "Копировать",
        "Name": "Название",
        "URL": "URL",
        "Delete": "Удалить",
        "OK": "OK",
        "Error": "Ошибка",
        "Copied!": "Скопировано!",
        "Start Date": "Дата начала",
        "Block Date Range": "Блокировка диапазона дат",
        "Unblock": "Разблокировать",
        "Base price": "Базовая цена",
    },
    'uk': {
        "Guest count must be at least 1.": "Кількість гостей має бути не менше 1.",
        "Manual": "Вручну",
        "iCal Import": "Імпорт iCal",
        "iCal Feed": "Стрічка iCal",
        "iCal Feeds": "Стрічки iCal",
        "Calendar": "Календар",
        "iCal Sync": "Синхронізація iCal",
        "Welcome back": "З поверненням",
        "Username": "Ім'я користувача",
        "Password": "Пароль",
        "Forgot password?": "Забули пароль?",
        "Reset Password": "Скинути пароль",
        "Email Verified": "Email підтверджено",
        "Email verified!": "Email підтверджено!",
        "Verification Failed": "Помилка перевірки",
        "Verify Your Email": "Підтвердіть ваш Email",
        "First name": "Ім'я",
        "Last name": "Прізвище",
        "Create a strong password": "Створіть надійний пароль",
        "Terms of Service": "Умови використання",
        "Privacy Policy": "Політика конфіденційності",
        "and": "та",
        "Booking Created": "Бронювання створено",
        "Select date": "Виберіть дату",
        "to": "до",
        "Upload Images": "Завантажити зображення",
        "Current Images": "Поточні зображення",
        "Main Photo": "Головне фото",
        "Calendar Overview": "Огляд календаря",
        "Quick Stats": "Швидка статистика",
        "Export Calendar": "Експорт календаря",
        "Import Calendars": "Імпорт календарів",
        "Copy": "Копіювати",
        "Name": "Назва",
        "URL": "URL",
        "Delete": "Видалити",
        "OK": "OK",
        "Error": "Помилка",
        "Copied!": "Скопійовано!",
        "Start Date": "Дата початку",
        "Block Date Range": "Блокування діапазону дат",
        "Unblock": "Розблокувати",
        "Base price": "Базова ціна",
    },
    'de': {
        "Guest count must be at least 1.": "Die Gästeanzahl muss mindestens 1 sein.",
        "Manual": "Manuell",
        "iCal Import": "iCal-Import",
        "iCal Feed": "iCal-Feed",
        "iCal Feeds": "iCal-Feeds",
        "Calendar": "Kalender",
        "iCal Sync": "iCal-Synchronisierung",
        "Welcome back": "Willkommen zurück",
        "Username": "Benutzername",
        "Password": "Passwort",
        "Forgot password?": "Passwort vergessen?",
        "Reset Password": "Passwort zurücksetzen",
        "Email Verified": "E-Mail bestätigt",
        "Email verified!": "E-Mail bestätigt!",
        "Verification Failed": "Überprüfung fehlgeschlagen",
        "Verify Your Email": "Bestätigen Sie Ihre E-Mail",
        "First name": "Vorname",
        "Last name": "Nachname",
        "Create a strong password": "Erstellen Sie ein sicheres Passwort",
        "Terms of Service": "Nutzungsbedingungen",
        "Privacy Policy": "Datenschutzerklärung",
        "and": "und",
        "Booking Created": "Buchung erstellt",
        "Select date": "Datum auswählen",
        "to": "bis",
        "Upload Images": "Bilder hochladen",
        "Current Images": "Aktuelle Bilder",
        "Main Photo": "Hauptfoto",
        "Calendar Overview": "Kalenderübersicht",
        "Quick Stats": "Schnellstatistik",
        "Export Calendar": "Kalender exportieren",
        "Import Calendars": "Kalender importieren",
        "Copy": "Kopieren",
        "Name": "Name",
        "URL": "URL",
        "Delete": "Löschen",
        "OK": "OK",
        "Error": "Fehler",
        "Copied!": "Kopiert!",
        "Start Date": "Startdatum",
        "Block Date Range": "Datumsbereich sperren",
        "Unblock": "Entsperren",
        "Base price": "Grundpreis",
    },
    'fr': {
        "Guest count must be at least 1.": "Le nombre d'invités doit être d'au moins 1.",
        "Manual": "Manuel",
        "iCal Import": "Import iCal",
        "iCal Feed": "Flux iCal",
        "iCal Feeds": "Flux iCal",
        "Calendar": "Calendrier",
        "iCal Sync": "Synchronisation iCal",
        "Welcome back": "Bienvenue",
        "Username": "Nom d'utilisateur",
        "Password": "Mot de passe",
        "Forgot password?": "Mot de passe oublié ?",
        "Reset Password": "Réinitialiser le mot de passe",
        "Email Verified": "Email vérifié",
        "Email verified!": "Email vérifié !",
        "Verification Failed": "Échec de la vérification",
        "Verify Your Email": "Vérifiez votre email",
        "First name": "Prénom",
        "Last name": "Nom de famille",
        "Create a strong password": "Créez un mot de passe fort",
        "Terms of Service": "Conditions d'utilisation",
        "Privacy Policy": "Politique de confidentialité",
        "and": "et",
        "Booking Created": "Réservation créée",
        "Select date": "Sélectionner une date",
        "to": "jusqu'à",
        "Upload Images": "Télécharger des images",
        "Current Images": "Images actuelles",
        "Main Photo": "Photo principale",
        "Calendar Overview": "Aperçu du calendrier",
        "Quick Stats": "Statistiques rapides",
        "Export Calendar": "Exporter le calendrier",
        "Import Calendars": "Importer des calendriers",
        "Copy": "Copier",
        "Name": "Nom",
        "URL": "URL",
        "Delete": "Supprimer",
        "OK": "OK",
        "Error": "Erreur",
        "Copied!": "Copié !",
        "Start Date": "Date de début",
        "Block Date Range": "Bloquer une plage de dates",
        "Unblock": "Débloquer",
        "Base price": "Prix de base",
    },
    'es': {
        "Guest count must be at least 1.": "El número de huéspedes debe ser al menos 1.",
        "Manual": "Manual",
        "iCal Import": "Importar iCal",
        "iCal Feed": "Feed iCal",
        "iCal Feeds": "Feeds iCal",
        "Calendar": "Calendario",
        "iCal Sync": "Sincronización iCal",
        "Welcome back": "Bienvenido de nuevo",
        "Username": "Nombre de usuario",
        "Password": "Contraseña",
        "Forgot password?": "¿Olvidaste tu contraseña?",
        "Reset Password": "Restablecer contraseña",
        "Email Verified": "Email verificado",
        "Email verified!": "¡Email verificado!",
        "Verification Failed": "Verificación fallida",
        "Verify Your Email": "Verifica tu email",
        "First name": "Nombre",
        "Last name": "Apellido",
        "Create a strong password": "Crea una contraseña segura",
        "Terms of Service": "Términos de servicio",
        "Privacy Policy": "Política de privacidad",
        "and": "y",
        "Booking Created": "Reserva creada",
        "Select date": "Seleccionar fecha",
        "to": "hasta",
        "Upload Images": "Subir imágenes",
        "Current Images": "Imágenes actuales",
        "Main Photo": "Foto principal",
        "Calendar Overview": "Resumen del calendario",
        "Quick Stats": "Estadísticas rápidas",
        "Export Calendar": "Exportar calendario",
        "Import Calendars": "Importar calendarios",
        "Copy": "Copiar",
        "Name": "Nombre",
        "URL": "URL",
        "Delete": "Eliminar",
        "OK": "OK",
        "Error": "Error",
        "Copied!": "¡Copiado!",
        "Start Date": "Fecha de inicio",
        "Block Date Range": "Bloquear rango de fechas",
        "Unblock": "Desbloquear",
        "Base price": "Precio base",
    },
}


def update_po_file(lang_code, translations):
    """Update a .po file with translations."""
    po_path = f'locale/{lang_code}/LC_MESSAGES/django.po'
    
    if not os.path.exists(po_path):
        print(f"File not found: {po_path}")
        return
    
    with open(po_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    updated_count = 0
    
    for msgid, msgstr in translations.items():
        # Pattern to find msgid and its empty msgstr
        # Handle both single-line and multi-line msgid
        escaped_msgid = re.escape(msgid)
        
        # Pattern for empty msgstr after this msgid
        pattern = rf'(msgid "{escaped_msgid}"\nmsgstr )""\n'
        replacement = rf'\1"{msgstr}"\n'
        
        new_content, count = re.subn(pattern, replacement, content)
        if count > 0:
            content = new_content
            updated_count += count
    
    # Also remove fuzzy markers for entries we've updated
    for msgid in translations.keys():
        escaped_msgid = re.escape(msgid)
        # Remove #, fuzzy and any #| lines before the msgid we translated
        pattern = rf'(#, fuzzy\n(?:#\|[^\n]*\n)*)(msgid "{escaped_msgid}")'
        content = re.sub(pattern, r'\2', content)
    
    with open(po_path, 'w', encoding='utf-8') as f:
        f.write(content)
    
    print(f"Updated {lang_code}: {updated_count} translations")


def main():
    """Main function to update all translation files."""
    for lang_code, translations in TRANSLATIONS.items():
        update_po_file(lang_code, translations)
    
    print("\nDone! Now run: python manage.py compilemessages")


if __name__ == '__main__':
    main()
